{% extends "base.html" %} 
{% block content %} 

<style>
/* ================================
   SIDEBAR LAYOUT + ANIMATION
================================ */
.dashboard-container {
    display: flex;
    min-height: calc(100vh - 70px);
}

/* SIDEBAR */
.sidebar {
    width: 260px;
    background: #ffffff;
    border-right: 1px solid #e5e7eb;
    padding: 25px 18px;
    transition: width .3s ease;
    overflow: hidden;
    position: sticky;
    top: 70px;
    height: calc(100vh - 70px);
}

.dark .sidebar {
    background: #161b22;
    border-color: #30363d;
}

/* Collapsed Sidebar */
.sidebar.collapsed {
    width: 80px;
}

/* SIDEBAR HEADER */
.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.toggle-btn {
    background: none;
    border: none;
    font-size: 26px;
    cursor: pointer;
    font-weight: bold;
}

/* USER GREETING */
.user-greeting {
    font-size: 20px;
    font-weight: 700;
    margin-top: 15px;
    transition: opacity .2s;
}

.sidebar.collapsed .user-greeting {
    opacity: 0;
}

/* USER PROFILE */
.profile-img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    margin: 15px auto;
    display: block;
    transition: .3s;
}

.sidebar.collapsed .profile-img {
    width: 55px;
    height: 55px;
}

/* MENU ITEMS */
.sidebar-menu {
    margin-top: 25px;
}

.sidebar-item {
    display: flex;
    align-items: center;
    padding: 12px 12px;
    margin-bottom: 12px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    transition: .2s ease;
    text-decoration: none;
    color: #333;
}

.dark .sidebar-item {
    color: #ddd;
}

.sidebar-item span {
    font-size: 22px;
    width: 35px;
}

.sidebar-item p {
    margin: 0;
    margin-left: 10px;
    transition: opacity .2s;
}

.sidebar.collapsed .sidebar-item p {
    opacity: 0;
}

/* Active item */
.sidebar-active {
    background: linear-gradient(90deg,#0099ff,#7f56d9);
    color: white !important;
}

/* Logout button */
.logout-btn {
    display: block;
    margin-top: 30px;
    padding: 12px;
    background: #dc3545;
    color: white;
    border-radius: 10px;
    text-align: center;
    font-weight: 600;
}

/* MAIN CONTENT */
.main-content {
    flex: 1;
    padding: 45px;
}
</style>


<!-- ================================
     PAGE LAYOUT
================================ -->
<div class="dashboard-container">

    <!-- ================================
         SIDEBAR
    ================================= -->
    <div class="sidebar" id="sidebar">

        <!-- Collapse Button -->
        <div class="sidebar-header">
            <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞</button>
        </div>

        <!-- Profile -->
        {% if user[1] %}
            <img src="{{ user[1] }}" class="profile-img">
        {% else %}
            <img src="https://via.placeholder.com/120" class="profile-img">
        {% endif %}

        <!-- Greeting -->
        <div class="user-greeting">
            Hello, {{ user[0] }} üëã
        </div>

        <!-- MENU -->
        <div class="sidebar-menu">

            <a href="/dashboard" class="sidebar-item sidebar-active">
                <span>üìä</span> <p>Dashboard</p>
            </a>

            <a href="/create" class="sidebar-item">
                <span>‚úçÔ∏è</span> <p>Write Post</p>
            </a>

            <a href="/upload_profile" class="sidebar-item">
                <span>üñºÔ∏è</span> <p>Edit Profile</p>
            </a>

            <a href="/" class="sidebar-item">
                <span>üè†</span> <p>Home</p>
            </a>

            <a href="/logout" class="logout-btn">Logout</a>
        </div>

    </div>

    <!-- ================================
         MAIN CONTENT
    ================================= -->
    <div class="main-content">
        <h1 class="fw-bold mb-4">Dashboard</h1>

        <!-- STAT CARD -->
        <div class="stat-card">
            <h5>Total Posts</h5>
            <h2 class="fw-bold">{{ posts|length }}</h2>
        </div>

        <h2 class="fw-bold mb-4">Your Posts</h2>

        <div class="row g-4">
            {% for post in posts %}
            <div class="col-lg-6">
                <div class="blog-card p-4 rounded-4 bg-white shadow-sm">

                    <h4 class="fw-bold">{{ post[1] }}</h4>

                    <div class="mt-3 d-flex">
                        <a href="/edit/{{ post[0] }}" class="btn btn-primary me-2 flex-fill">Edit</a>
                        <a href="/delete/{{ post[0] }}" class="btn btn-danger flex-fill">Delete</a>
                    </div>

                </div>
            </div>
            {% endfor %}
        </div>

    </div>
</div>


<!-- SIDEBAR TOGGLE SCRIPT -->
<script>
function toggleSidebar() {
    document.getElementById("sidebar").classList.toggle("collapsed");
}
</script>

{% endblock %}

